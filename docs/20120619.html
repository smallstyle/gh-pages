<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja-JP">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="generator" content="tDiary 3.2.1">
	<meta http-equiv="Last-Modified" content="Wed, 20 Jun 2012 23:03:25 GMT">
	<meta http-equiv="Content-Script-Type" content="text/javascript; charset=UTF-8">
	<meta name="author" content="hb">
	
	<link rel="prev" title="前の日記(2012-06-04)" href="./20120604.html">
	<link rel="next" title="次の日記(2012-06-20)" href="./20120620.html">
	<link rel="start" title="最新" href="./">
	<link rel="alternate" media="handheld" type="text/html" href="http://www.smallstyle.com/20120619.html">
	<link rel="shortcut icon" href="favicon.ico">
	<meta name="description" content="日々，気になったことを書き留める日記">
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js" type="text/javascript"></script>
	<script src="js/00default.js?3.2.120200906" type="text/javascript"></script>
	<script src="js/highlight.js?3.2.120200906" type="text/javascript"></script>
		<script type="text/javascript"><!--
		$tDiary.style = 'wiki';
		$tDiary.title = "SmallStyle(2012-06-19)";
		//-->
		</script>
	<meta http-equiv="content-style-type" content="text/css">
	<link rel="stylesheet" href="theme/base.css" type="text/css" media="all">
	<link rel="stylesheet" href="stylesheets/smallstyle-2010/smallstyle-2010.css" title="smallstyle-2010" type="text/css" media="all">
	
	<title> tDiary を unicorn で動かすまでのもろもろ - SmallStyle(2012-06-19)</title>
	
	<link rel="author" href="https://plus.google.com/116137028933519395680">
		<style type="text/css"><!--
			form.comment div.mail { display: none; }
		--></style>
	<link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.smallstyle.com/smallstyle">
	<link rel="alternate" type="application/rss+xml" title="RSS(without comments)" href="http://feeds.smallstyle.com/smallstyle_no_comments">
	<style type="text/css" media="all"><!--
	div.sequel {
		font-size: 75%;
		text-align: right;
		margin: 0px;
	}
	--></style>
</head>
<body>
<div class="whole-content">

<div class="adminmenu"><div class="adminmenu">
<span class="adminmenu"><a href="./20120604.html">&laquo;前の日記(2012-06-04)</a></span>
<span class="adminmenu"><a href="./">最新</a></span>
<span class="adminmenu"><a href="./20120620.html">次の日記(2012-06-20)&raquo;</a></span>
</div>
</div>
<h1><a href="http://www.smallstyle.com/">SmallStyle</a></h1>
<div class="content">
<div class="main">

<hr class="sep">


	
<div class="day autopagerize_page_element">
<h2><span class="date">
<a href="./20120619.html">2012-06-19</a>
</span> 
<span class="title"></span></h2>

<div class="body">

<div class="section">

<h3><a name="p01" href="./20120619.html#p01" title="tDiary を unicorn で動かすまでのもろもろ"><span class="sanchor">_</span></a> tDiary を unicorn で動かすまでのもろもろ</h3>
<p>サーバーの引っ越し作業を機に tDiary を Unicorn で動かすようにしたので，このサーバーでの設定について記録しておきます．サーバーの環境は以下の通り．</p>

<ul>
<li>さくらの VPS 1GB</li>
<li>Ubuntu 12.04 Server (64bit)</li>
<li>Ruby 1.9.3-p194 (<a href="https://github.com/sstephenson/rbenv/wiki/shared-install-of-rbenv">shared install of rbenv</a>)</li>
</ul>

<p>文中でのコマンドなどは必要に応じて sudo などで実行しています．</p>

<h4>最新の tDiary を入手する</h4>

<p>最新の安定版は 3.1.3 ですが，リリース後に特に Rack 環境まわりの変更が充実しているので，最新版を github から clone します．ちなみにこのサーバーでは tDiary を/opt/tdiary 以下で管理し，所有者を www-data ユーザーとしています．環境構築時は作業ユーザーの権限にしておいて，最後に必要に応じて権限を変更するほうがいろいろ楽かもしれないです．</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">mkdir</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">tdiary</span>
<span class="err">$</span> <span class="n">cd</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">tdiary</span>
<span class="err">$</span> <span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="o">:</span><span class="c1">//github.com/tdiary/tdiary-core.git</span>
</pre></div>
<h4>必要なライブラリのインストール</h4>

<p>Rack 環境で動作させるために必要なライブラリについては，Gemfile で定義されているので，bundler を利用してインストールします．<del>特にまっさらな環境の場合，coffeescript から execjs を介して JavaScript ランタイムを実行するので，nodejs などなんらかの JavaScript ランタイムがインストールされている必要があります．ここでは Gemfile に therubyracer を追加して対応することにしました．</del>現在は Gemfile に記述されているので，追加する必要はありません．</p>
<div class="highlight"><pre><span class="gh">diff --git a/Gemfile b/Gemfile</span>
<span class="gh">index 9ff550f..ee45113 100644</span>
<span class="gd">--- a/Gemfile</span>
<span class="gi">+++ b/Gemfile</span>
<span class="gu">@@ -2,6 +2,7 @@ source :rubygems</span>

 gem &#39;rake&#39;
 gem &#39;coffee-script&#39;
<span class="gi">+gem &#39;therubyracer&#39;</span>

 # Use rack environment
 gem &#39;rack&#39;
</pre></div>
<p>Gemfile へ therubyracer を追加したら，bundler をインストールし，その後，必要なライブラリをインストールします．インストール先は tdiary-core/.bundle 以下とし，test,development,production グループのライブラリは除外しています．production グループは主に Heroku 向けのライブラリが定義されていて，今のところ，DB も memcached も使わないので除外しています．</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">cd</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">tdiary</span>
<span class="err">$</span> <span class="n">rbevn</span> <span class="n">local</span> <span class="mf">1.9.3</span><span class="o">-</span><span class="n">p194</span>
<span class="err">$</span> <span class="n">gem</span> <span class="n">install</span> <span class="n">bundler</span>
<span class="err">$</span> <span class="n">rbenv</span> <span class="n">rehash</span>
<span class="err">$</span> <span class="n">cd</span> <span class="n">tdiary</span><span class="o">-</span><span class="n">core</span>
<span class="err">$</span> <span class="n">bundle</span> <span class="n">install</span> <span class="o">--</span><span class="n">path</span> <span class="p">.</span><span class="n">bundle</span> <span class="o">--</span><span class="n">without</span> <span class="n">test</span> <span class="n">development</span> <span class="n">production</span>
</pre></div>
<h4>tdiary.conf を作成して rackup してみる</h4>

<p>tDiary の設定ファイル tdiary.conf を作成します．tdiary.conf.sample をコピーして必要な部分を修正すれば基本的に問題ありません．日記データの保存先を指定する @data_path に適切なパスを指定します．書き込み先は，最終的に unicorn を実行するユーザーが書き込み権限のある場所を指定します．</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">cp</span> <span class="n">tdiary</span><span class="p">.</span><span class="n">conf</span><span class="p">.</span><span class="n">sample</span> <span class="n">tdiary</span><span class="p">.</span><span class="n">conf</span>
</pre></div>
<p>ここまでこればひとまず rackup コマンドでアプリケーションを実行して動作の確認ができます．</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">bundle</span> <span class="n">exec</span> <span class="n">rackup</span>
</pre></div>
<p>ブラウザでアクセスしてみて表示されればとりあえず問題なし．<del>tdiary.conf で @index が未設定の場合は，リダイレクト先の URL がデフォルト値として&quot;./&quot;が指定されてアクセスできない場合がありますが，&quot;.&quot;を消せばアクセスできます．</del><a href="https://github.com/tdiary/tdiary-core/pull/180">バグのようだったので修正しました．</a>この現象が起きるのは初回アクセス時のみのよう．</p>

<h4>更新ページに認証をかける</h4>

<p>認証関係は CGI の時は Web サーバーで行っていたけど，Rack 環境では OmniAuth を利用した Twitter や Github のアカウントでの認証もできるようになっています．このサーバーでは従来と同じような .htpasswd を利用した認証にしています．apache2-utils パッケージなどがインストールされていると，htpasswd コマンドを実行して，,htpasswd ファイルの作成もできますが，tDiary では .htpasswd を作成するための rake コマンドが用意されているので，わざわざインストールしてなくてもよいので便利です．</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">RACK_ENV</span><span class="o">=</span><span class="n">production</span> <span class="n">bundle</span> <span class="n">exec</span> <span class="n">rake</span> <span class="n">auth</span><span class="o">:</span><span class="n">password</span><span class="o">:</span><span class="n">create</span>
</pre></div>
<p>ユーザー名とパスワードの入力をすると.htpasswd ファイルが出力されます．</p>

<h4>Unicorn で動かす</h4>

<p>Unicorn で実行するために，設定ファイルとして unicorn.rb を作成します．中身は，https://github.com/blog/517-unicorn を参考にしています．PID ファイルやログの出力先などは，Ubuntu で標準的に出力される場所に合わせています．また，unicorn のプロセスは master プロセスを root ユーザーで実行し，fork したプロセスは www-data ユーザーで実行するようになっています．</p>
<div class="highlight"><pre><span class="n">worker_processes</span> <span class="mi">2</span>

<span class="n">app_dir</span> <span class="o">=</span> <span class="n">File</span><span class="p">.</span><span class="n">expand_path</span><span class="p">(</span> <span class="n">File</span><span class="p">.</span><span class="n">dirname</span><span class="p">(</span> <span class="n">__FILE__</span> <span class="p">)</span> <span class="p">)</span>
<span class="n">working_directory</span> <span class="n">app_dir</span>

<span class="n">preload_app</span> <span class="nb">true</span>

<span class="n">timeout</span> <span class="mi">30</span>

<span class="n">listen</span> <span class="s">&quot;/tmp/tdiary.sock&quot;</span><span class="p">,</span> <span class="o">:</span><span class="n">backlog</span> <span class="o">=&gt;</span> <span class="mi">64</span>
<span class="n">listen</span> <span class="mi">3000</span><span class="p">,</span> <span class="o">:</span><span class="n">tcp_nopush</span> <span class="o">=&gt;</span> <span class="nb">true</span>

<span class="n">pid</span> <span class="s">&quot;/var/run/tdiary.pid&quot;</span>

<span class="n">stderr_path</span> <span class="s">&quot;/var/log/tdiary/stderr.log&quot;</span>
<span class="n">stdout_path</span> <span class="s">&quot;/var/log/tdiary/stdout.log&quot;</span>

<span class="n">before_fork</span> <span class="k">do</span> <span class="o">|</span><span class="n">server</span><span class="p">,</span> <span class="n">worker</span><span class="o">|</span>
        <span class="n">old_pid</span> <span class="o">=</span> <span class="s">&quot;/var/run/tdiary.pid.oldbin&quot;</span>
        <span class="k">if</span> <span class="n">File</span><span class="p">.</span><span class="n">exists</span><span class="o">?</span><span class="p">(</span> <span class="n">old_pid</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">server</span><span class="p">.</span><span class="n">pid</span> <span class="o">!=</span> <span class="n">old_pid</span>
                <span class="n">begin</span>
                        <span class="n">Process</span><span class="p">.</span><span class="n">kill</span><span class="p">(</span> <span class="s">&quot;QUIT&quot;</span><span class="p">,</span> <span class="n">File</span><span class="p">.</span><span class="n">read</span><span class="p">(</span> <span class="n">old_pid</span> <span class="p">).</span><span class="n">to_i</span> <span class="p">)</span>
                <span class="n">rescue</span> <span class="n">Errno</span><span class="o">::</span><span class="n">ENOENT</span><span class="p">,</span> <span class="n">Errno</span><span class="o">::</span><span class="n">ESRCH</span>
                <span class="n">end</span>
        <span class="n">end</span>
<span class="n">end</span>

<span class="n">after_fork</span> <span class="k">do</span> <span class="o">|</span><span class="n">server</span><span class="p">,</span> <span class="n">worker</span><span class="o">|</span>
        <span class="n">begin</span>
                <span class="n">uid</span><span class="p">,</span> <span class="n">gid</span> <span class="o">=</span> <span class="n">Process</span><span class="p">.</span><span class="n">euid</span><span class="p">,</span> <span class="n">Process</span><span class="p">.</span><span class="n">egid</span>
                <span class="n">user</span><span class="p">,</span> <span class="n">group</span> <span class="o">=</span> <span class="s">&quot;www-data&quot;</span><span class="p">,</span> <span class="s">&quot;www-data&quot;</span>
                <span class="n">target_uid</span> <span class="o">=</span> <span class="n">Etc</span><span class="p">.</span><span class="n">getpwnam</span><span class="p">(</span> <span class="n">user</span> <span class="p">).</span><span class="n">uid</span>
                <span class="n">target_gid</span> <span class="o">=</span> <span class="n">Etc</span><span class="p">.</span><span class="n">getpwnam</span><span class="p">(</span> <span class="n">group</span> <span class="p">).</span><span class="n">gid</span>
                <span class="n">worker</span><span class="p">.</span><span class="n">tmp</span><span class="p">.</span><span class="n">chown</span><span class="p">(</span> <span class="n">target_uid</span><span class="p">,</span> <span class="n">target_gid</span> <span class="p">)</span>
                <span class="k">if</span> <span class="n">uid</span> <span class="o">!=</span> <span class="n">target_uid</span> <span class="o">||</span> <span class="n">gid</span> <span class="o">!=</span> <span class="n">target_gid</span>
                        <span class="n">Process</span><span class="p">.</span><span class="n">initgroups</span><span class="p">(</span> <span class="n">user</span><span class="p">,</span> <span class="n">target_gid</span> <span class="p">)</span>
                        <span class="n">Process</span><span class="o">::</span><span class="n">GID</span><span class="p">.</span><span class="n">change_privilege</span><span class="p">(</span> <span class="n">target_gid</span> <span class="p">)</span>
                        <span class="n">Process</span><span class="o">::</span><span class="n">UID</span><span class="p">.</span><span class="n">change_privilege</span><span class="p">(</span> <span class="n">target_uid</span> <span class="p">)</span>
                <span class="n">end</span>
        <span class="n">rescue</span> <span class="o">=&gt;</span> <span class="n">e</span>
                <span class="n">STDERR</span><span class="p">.</span><span class="n">puts</span> <span class="s">&quot;couldn&#39;t change user, oh well&quot;</span>
                <span class="n">raise</span> <span class="n">e</span>
        <span class="n">end</span>
<span class="n">end</span>
</pre></div>
<p>unicorn をインストールし，unicorn.rb で指定したログ出力先のディレクトリを作成します．</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">gem</span> <span class="n">install</span> <span class="n">unicorn</span>
<span class="err">$</span> <span class="n">rbenv</span> <span class="n">rehash</span>
<span class="err">$</span> <span class="n">sudo</span> <span class="n">mkdir</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">tdiary</span>
</pre></div>
<p>これで tDiary を unicorn で実行することが可能になります．実行ユーザーは root 権限でないと，上記の設定では PID ファイルの作成で権限がなくエラーとなるので，以下のように実行すると確認できます．</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">sudo</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">rbenv</span><span class="o">/</span><span class="n">versions</span><span class="o">/</span><span class="mf">1.9.3</span><span class="o">-</span><span class="n">p194</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">unicorn</span> <span class="o">-</span><span class="n">c</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">tdiary</span><span class="o">/</span><span class="n">tdiary</span><span class="o">-</span><span class="n">core</span><span class="o">/</span><span class="n">unicorn</span><span class="p">.</span><span class="n">rb</span> 
</pre></div>
<p>ここから先は主に運用する際に必要な設定手順について．</p>

<h4>tDiary をサービスとして登録する</h4>

<p>upstart を利用して tDiary をサーバー起動時に立ち上がるように設定します．/etc/init 以下に tdiary.conf ファイルを作成し，以下のような設定にしました．</p>
<div class="highlight"><pre> <span class="err">#</span><span class="o">!/</span><span class="n">bin</span><span class="o">/</span><span class="n">bash</span>
<span class="n">description</span> <span class="s">&quot;tDairy&quot;</span>

<span class="n">start</span> <span class="n">on</span> <span class="n">runlevel</span> <span class="p">[</span><span class="mi">2345</span><span class="p">]</span>
<span class="n">stop</span> <span class="n">on</span> <span class="n">runlevel</span> <span class="p">[</span><span class="mo">016</span><span class="p">]</span>

<span class="n">script</span>
        <span class="n">export</span> <span class="n">LANG</span><span class="o">=</span><span class="n">en_US</span><span class="p">.</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span>
        <span class="n">exec</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">rbenv</span><span class="o">/</span><span class="n">versions</span><span class="o">/</span><span class="mf">1.9.3</span><span class="o">-</span><span class="n">p194</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">unicorn</span> <span class="o">-</span><span class="n">c</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">tdiary</span><span class="o">/</span><span class="n">tdiary</span><span class="o">-</span><span class="n">core</span><span class="o">/</span><span class="n">unicorn</span><span class="p">.</span><span class="n">rb</span> 
<span class="n">end</span> <span class="n">script</span>

<span class="n">respawn</span>
</pre></div>
<p>これにより service コマンドで tDiary の stop/start が行えるようになります．</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">sudo</span> <span class="n">service</span> <span class="n">tdiary</span> <span class="n">start</span>
</pre></div>
<h4>ログをローテーションする</h4>

<p>しばらく運用していくとログファイルが大きくなってくるのが気になってきたので，logrotate を利用してログのローテーションを行うようにしました．/etc/logrotate.d 以下に設定ファイルを配置してローテーションさせるようにします．最初に起動したときに出力されたログファイルの所有者が root の場合，reopen に失敗するので出力するログファイルの所有者は www-data とするように指定します．また，Unicorn は USR1を送るとログファイルを reopen してくれるのでローテーション後に USR1を送るように処理を含めている．</p>
<div class="highlight"><pre><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">tdiary</span><span class="o">/*</span><span class="p">.</span><span class="n">log</span> <span class="p">{</span>
        <span class="n">daily</span>
        <span class="n">missingok</span>
        <span class="n">rotate</span> <span class="mi">52</span>
        <span class="n">compress</span>
        <span class="n">delaycompress</span>
        <span class="n">notifempty</span>
        <span class="n">create</span> <span class="mo">0640</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">adm</span>
        <span class="n">sharedscripts</span>
        <span class="n">postrotate</span>
                <span class="p">[</span> <span class="o">!</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">tdiary</span><span class="p">.</span><span class="n">pid</span> <span class="p">]</span> <span class="o">||</span> <span class="n">kill</span> <span class="o">-</span><span class="n">USR1</span> <span class="err">`</span><span class="n">cat</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">tdiary</span><span class="p">.</span><span class="n">pid</span><span class="err">`</span>
        <span class="n">endscript</span>
<span class="p">}</span>
</pre></div>
<h4>肥大化した Unicorn プロセスを止める</h4>

<p>運用して気になるのは fork したプロセスが肥大化している点．一定数のリクエストをさばくか，既定のメモリ使用量を超えるとプロセスを Kill する便利な <a href="https://gist.github.com/1258681">unicon_killer</a> を config.ru に追加してみました．</p>
<div class="highlight"><pre><span class="gh">diff --git a/config.ru b/config.ru</span>
<span class="gh">index 1a169c7..299e968 100644</span>
<span class="gd">--- a/config.ru</span>
<span class="gi">+++ b/config.ru</span>
<span class="gu">@@ -17,6 +17,12 @@ use OmniAuth::Builder do</span>
        # provider :twitter, ENV[&#39;TWITTER_KEY&#39;], ENV[&#39;TWITTER_SECRET&#39;]
        # provider :github, ENV[&#39;GITHUB_KEY&#39;], ENV[&#39;GITHUB_SECRET&#39;]
 end
<span class="gi">+</span>
<span class="gi">+# Unicorn Killer</span>
<span class="gi">+require &#39;unicorn_killer&#39;</span>
<span class="gi">+use UnicornKiller::Oom, 60 * 1024</span>
<span class="gi">+use UnicornKiller::MaxRequests, 1000</span>
<span class="gi">+</span>
 map &quot;#{base_dir}/auth&quot; do
        run TDiary:<img src='http://www.emoji-cheat-sheet.com/graphics/emojis/rack.png' width='20' height='20' title='rack' alt='rack' class='emoji' /><img src='http://www.emoji-cheat-sheet.com/graphics/emojis/auth.png' width='20' height='20' title='auth' alt='auth' class='emoji' /><img src='http://www.emoji-cheat-sheet.com/graphics/emojis/omniauth.png' width='20' height='20' title='omniauth' alt='omniauth' class='emoji' />:CallbackHandler.new
 end
</pre></div>
<p>というわけで，このサーバーで tDiary が動くまでの手順でした．Unicorn で実行してしばらくたちますが，特に問題もなく安定して動作しています．レスポンスもなかなかよいので，新しく環境を作るタイミングなどで移行してみてもよいのではないでしょうか．</p>

</div>


</div>

<div class="comment">

</div>

<div id="comment-form-section"></div>








</div>

<hr class="sep">

</div>





<div class="additional_information">
<div class="information">
<h4>about me</h4>
<div itemscope itemtype="http://data-vocabulary.org/Person">
<dl>
<p>いろいろと興味を持ったことを書いてます．ちょっとしたことは <a href="http://twitter.com/smallstyle"><span itemprop="name">hb</span>(@<span itemprop="nickname">smallstyle</span>) on Twitter</a> で書いてます．</p>
</div>

<h4>Archive</h4>
<div class="calendar">
<div class="year">2003|<a href="./200301.html">01</a>|<a href="./200302.html">02</a>|<a href="./200303.html">03</a>|<a href="./200304.html">04</a>|<a href="./200305.html">05</a>|<a href="./200306.html">06</a>|<a href="./200307.html">07</a>|<a href="./200308.html">08</a>|<a href="./200309.html">09</a>|<a href="./200310.html">10</a>|<a href="./200311.html">11</a>|<a href="./200312.html">12</a>|</div>
<div class="year">2004|<a href="./200401.html">01</a>|<a href="./200402.html">02</a>|<a href="./200403.html">03</a>|<a href="./200404.html">04</a>|<a href="./200405.html">05</a>|<a href="./200406.html">06</a>|<a href="./200407.html">07</a>|<a href="./200408.html">08</a>|<a href="./200409.html">09</a>|<a href="./200410.html">10</a>|<a href="./200411.html">11</a>|<a href="./200412.html">12</a>|</div>
<div class="year">2005|<a href="./200501.html">01</a>|<a href="./200502.html">02</a>|<a href="./200503.html">03</a>|<a href="./200504.html">04</a>|<a href="./200505.html">05</a>|<a href="./200506.html">06</a>|<a href="./200507.html">07</a>|<a href="./200508.html">08</a>|<a href="./200509.html">09</a>|<a href="./200510.html">10</a>|<a href="./200511.html">11</a>|<a href="./200512.html">12</a>|</div>
<div class="year">2006|<a href="./200601.html">01</a>|<a href="./200602.html">02</a>|<a href="./200603.html">03</a>|<a href="./200604.html">04</a>|<a href="./200605.html">05</a>|<a href="./200606.html">06</a>|<a href="./200607.html">07</a>|<a href="./200608.html">08</a>|<a href="./200609.html">09</a>|<a href="./200610.html">10</a>|<a href="./200611.html">11</a>|<a href="./200612.html">12</a>|</div>
<div class="year">2007|<a href="./200701.html">01</a>|<a href="./200702.html">02</a>|<a href="./200703.html">03</a>|<a href="./200704.html">04</a>|<a href="./200705.html">05</a>|<a href="./200706.html">06</a>|<a href="./200707.html">07</a>|<a href="./200708.html">08</a>|<a href="./200709.html">09</a>|<a href="./200710.html">10</a>|<a href="./200711.html">11</a>|<a href="./200712.html">12</a>|</div>
<div class="year">2008|<a href="./200801.html">01</a>|<a href="./200802.html">02</a>|<a href="./200803.html">03</a>|<a href="./200804.html">04</a>|<a href="./200805.html">05</a>|<a href="./200806.html">06</a>|<a href="./200807.html">07</a>|<a href="./200808.html">08</a>|<a href="./200809.html">09</a>|<a href="./200810.html">10</a>|<a href="./200812.html">12</a>|</div>
<div class="year">2009|<a href="./200901.html">01</a>|<a href="./200902.html">02</a>|<a href="./200903.html">03</a>|<a href="./200904.html">04</a>|<a href="./200905.html">05</a>|<a href="./200906.html">06</a>|<a href="./200907.html">07</a>|<a href="./200908.html">08</a>|<a href="./200909.html">09</a>|<a href="./200910.html">10</a>|<a href="./200911.html">11</a>|<a href="./200912.html">12</a>|</div>
<div class="year">2010|<a href="./201001.html">01</a>|<a href="./201002.html">02</a>|<a href="./201003.html">03</a>|<a href="./201004.html">04</a>|<a href="./201005.html">05</a>|<a href="./201006.html">06</a>|<a href="./201007.html">07</a>|<a href="./201008.html">08</a>|<a href="./201009.html">09</a>|<a href="./201010.html">10</a>|<a href="./201011.html">11</a>|<a href="./201012.html">12</a>|</div>
<div class="year">2011|<a href="./201101.html">01</a>|<a href="./201102.html">02</a>|<a href="./201103.html">03</a>|<a href="./201104.html">04</a>|<a href="./201105.html">05</a>|<a href="./201106.html">06</a>|<a href="./201107.html">07</a>|<a href="./201108.html">08</a>|<a href="./201109.html">09</a>|<a href="./201110.html">10</a>|<a href="./201111.html">11</a>|<a href="./201112.html">12</a>|</div>
<div class="year">2012|<a href="./201201.html">01</a>|<a href="./201202.html">02</a>|<a href="./201203.html">03</a>|<a href="./201204.html">04</a>|<a href="./201205.html">05</a>|<a href="./201206.html">06</a>|<a href="./201207.html">07</a>|<a href="./201208.html">08</a>|<a href="./201209.html">09</a>|<a href="./201210.html">10</a>|<a href="./201211.html">11</a>|<a href="./201212.html">12</a>|</div>
<div class="year">2013|<a href="./201301.html">01</a>|<a href="./201302.html">02</a>|<a href="./201303.html">03</a>|<a href="./201304.html">04</a>|<a href="./201305.html">05</a>|<a href="./201306.html">06</a>|<a href="./201307.html">07</a>|<a href="./201308.html">08</a>|<a href="./201309.html">09</a>|<a href="./201310.html">10</a>|<a href="./201311.html">11</a>|<a href="./201312.html">12</a>|</div>
<div class="year">2014|<a href="./201401.html">01</a>|<a href="./201402.html">02</a>|<a href="./201403.html">03</a>|<a href="./201404.html">04</a>|<a href="./201405.html">05</a>|<a href="./201406.html">06</a>|<a href="./201407.html">07</a>|<a href="./201408.html">08</a>|<a href="./201409.html">09</a>|<a href="./201410.html">10</a>|<a href="./201411.html">11</a>|<a href="./201412.html">12</a>|</div>
<div class="year">2015|<a href="./201501.html">01</a>|<a href="./201502.html">02</a>|<a href="./201503.html">03</a>|<a href="./201504.html">04</a>|<a href="./201505.html">05</a>|<a href="./201506.html">06</a>|<a href="./201507.html">07</a>|<a href="./201508.html">08</a>|<a href="./201509.html">09</a>|<a href="./201510.html">10</a>|<a href="./201511.html">11</a>|<a href="./201512.html">12</a>|</div>
<div class="year">2016|<a href="./201601.html">01</a>|<a href="./201602.html">02</a>|<a href="./201603.html">03</a>|<a href="./201604.html">04</a>|<a href="./201605.html">05</a>|<a href="./201606.html">06</a>|<a href="./201607.html">07</a>|<a href="./201608.html">08</a>|<a href="./201609.html">09</a>|<a href="./201612.html">12</a>|</div>
</div>

</div>

<hr>



</div>
<div class="adminmenu"><span class="adminmenu"><a href="./20120604.html">&laquo;前の日記(2012-06-04)</a></span>
<span class="adminmenu"><a href="./">最新</a></span>
<span class="adminmenu"><a href="./20120620.html">次の日記(2012-06-20)&raquo;</a></span>
</div>
</div>
<ul class="plugin-counter">
<li>Yesterday: <span class="counter-yesterday"><span class="counter-0"><span class="counter-num-1">1</span></span><span class="counter-1"><span class="counter-num-6">6</span></span><span class="counter-2"><span class="counter-num-9">9</span></span></span></li>
<li>Today:<span class="counter-today"><span class="counter-0"><span class="counter-num-1">1</span></span><span class="counter-1"><span class="counter-num-4">4</span></span><span class="counter-2"><span class="counter-num-9">9</span></span></span></li>
<li>Total:<span class="counter"><span class="counter-0"><span class="counter-num-1">1</span></span><span class="counter-1"><span class="counter-num-0">0</span></span><span class="counter-2"><span class="counter-num-2">2</span></span><span class="counter-3"><span class="counter-num-8">8</span></span><span class="counter-4"><span class="counter-num-2">2</span></span><span class="counter-5"><span class="counter-num-1">1</span></span><span class="counter-6"><span class="counter-num-7">7</span></span></span></li>
</ul>




			<script type="text/javascript"><!--
			document.getElementById('comment-form-section').innerHTML = '';
			//--></script>
		<script type="text/javascript"><!--
			document.getElementsByName("mail")[0].value = "";
		//--></script>
<div class="footer">
Generated by <a href="http://www.tdiary.org/">tDiary</a> version 3.2.1<br>
Powered by <a href="http://www.ruby-lang.org/">Ruby</a> version 1.9.3-p194
</div>
</div>
</body>
</html>
